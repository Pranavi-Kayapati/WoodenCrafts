{"version":3,"file":"styled-components-macro.esm.js","sources":["../src/macro/index.ts"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { addDefault, addNamed } from '@babel/helper-module-imports';\nimport traverse from '@babel/traverse';\nimport { createMacro } from 'babel-plugin-macros';\nimport babelPlugin from 'babel-plugin-styled-components';\nfunction styledComponentsMacro(_a) {\n    var references = _a.references, state = _a.state, t = _a.babel.types, _b = _a.config, _c = _b === void 0 ? {} : _b, _d = _c.importModuleName, importModuleName = _d === void 0 ? 'styled-components' : _d, config = __rest(_c, [\"importModuleName\"]);\n    var program = state.file.path;\n    // FIRST STEP : replace `styled-components/macro` by `styled-components\n    // references looks like this\n    // { default: [path, path], css: [path], ... }\n    var customImportName;\n    Object.keys(references).forEach(function (refName) {\n        // generate new identifier\n        var id;\n        if (refName === 'default') {\n            id = addDefault(program, importModuleName, { nameHint: 'styled' });\n            customImportName = id;\n        }\n        else {\n            id = addNamed(program, refName, importModuleName, { nameHint: refName });\n        }\n        // update references with the new identifiers\n        references[refName].forEach(function (referencePath) {\n            referencePath.node.name = id.name;\n        });\n    });\n    // SECOND STEP : apply babel-plugin-styled-components to the file\n    var stateWithOpts = __assign(__assign({}, state), { opts: __assign(__assign({}, config), { topLevelImportPaths: (config.topLevelImportPaths || []).concat(importModuleName) }), customImportName: customImportName });\n    traverse(program.parent, babelPlugin({ types: t }).visitor, undefined, stateWithOpts);\n}\nexport default createMacro(styledComponentsMacro, {\n    configName: 'styledComponents',\n});\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":";;;;;;AAKA,SAAS,qBAAqB,CAAC,EAAE,EAAE;AACnC,IAAI,IAAI,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,KAAK,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,gBAAgB,EAAE,gBAAgB,GAAG,EAAE,KAAK,KAAK,CAAC,GAAG,mBAAmB,GAAG,EAAE,EAAE,MAAM,GAAG,MAAM,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC,CAAC;AACzP,IAAI,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;AAClC;AACA;AACA;AACA,IAAI,IAAI,gBAAgB,CAAC;AACzB,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAU,OAAO,EAAE;AACvD;AACA,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,IAAI,OAAO,KAAK,SAAS,EAAE;AACnC,YAAY,EAAE,GAAG,UAAU,CAAC,OAAO,EAAE,gBAAgB,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;AAC/E,YAAY,gBAAgB,GAAG,EAAE,CAAC;AAClC,SAAS;AACT,aAAa;AACb,YAAY,EAAE,GAAG,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,gBAAgB,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC;AACrF,SAAS;AACT;AACA,QAAQ,UAAU,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAU,aAAa,EAAE;AAC7D,YAAY,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC;AAC9C,SAAS,CAAC,CAAC;AACX,KAAK,CAAC,CAAC;AACP;AACA,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,mBAAmB,EAAE,CAAC,MAAM,CAAC,mBAAmB,IAAI,EAAE,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,CAAC,CAAC;AAC1N,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE,WAAW,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;AAC1F,CAAC;AACD,YAAe,WAAW,CAAC,qBAAqB,EAAE;AAClD,IAAI,UAAU,EAAE,kBAAkB;AAClC,CAAC,CAAC;;;;"}